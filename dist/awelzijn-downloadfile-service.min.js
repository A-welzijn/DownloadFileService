/*! awelzijn-downloadfile-service v3.0.1 */
"use strict";!function(module){try{module=angular.module("awelzijn.downloadfileservice")}catch(e){module=angular.module("awelzijn.downloadfileservice",[])}module.factory("aWelzijnDownloadFileService",["$http","aWelzijnNotificationService",function($http,notificationService){function _downloadBestand(requestUrl,options,naam){var httpConfig={method:"GET",url:requestUrl,responseType:"arraybuffer"};options.params&&(httpConfig.params=options.params),$http.get(requestUrl,httpConfig).success(function(data,status,headers,config,statusText){var octetStreamMime="application/octet-stream",success=!1;headers=headers();var filename=headers["x-filename"]||naam,contentType=headers["content-type"]||octetStreamMime;try{console.log("saveBlob methode proberen...");var blob=new Blob([data],{type:contentType});if(navigator.msSaveBlob)navigator.msSaveBlob(blob,filename);else{var saveBlob=navigator.webkitSaveBlob||navigator.mozSaveBlob||navigator.saveBlob;if(void 0===saveBlob)throw"Not supported";saveBlob(blob,filename)}success=!0}catch(ex){console.log(ex)}if(!success){var urlCreator=window.URL||window.webkitURL||window.mozURL||window.msURL;if(urlCreator){var link=document.createElement("a");if("download"in link)try{console.log("download-link methode met gesimuleerde click proberen...");var blob=new Blob([data],{type:contentType}),url=urlCreator.createObjectURL(blob);link.setAttribute("href",url),link.setAttribute("download",filename);var event=document.createEvent("MouseEvents");event.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),link.dispatchEvent(event),success=!0}catch(ex){console.log(ex)}if(!success)try{console.log("download-link methode met window.location proberen...");var blob=new Blob([data],{type:octetStreamMime}),url=urlCreator.createObjectURL(blob);window.location=url,success=!0}catch(ex){console.log(ex)}}}success||notificationService.addError("Het bestand kon niet worden gedownload {"+filename+"}.")}).error(function(data,status,headers,config,statusText){notificationService.createErrorMessages(data,status,requestUrl)})}return{downloadBestand:_downloadBestand}}])}();
//# sourceMappingURL=awelzijn-downloadfile-service.min.map